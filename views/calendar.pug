extends layout

block content
  br
  br
  .container
    each day in week
      h3= day.name
      each meal in day.meals
        if meal.eaten
          h4.text-secondary= meal.name
          .row.align-items-start
            each recipe in meal.recipes
              .col-md-3
                .card.border-secondary.my-1
                  h5.card-header.d-flex
                    a.mr-auto.text-secondary(data-toggle="collapse" href="#meal"+recipe.id)= recipe.name
                    .drop-down
                      a.text-secondary(data-toggle="dropdown" href="#")
                        i.fas.fa-ellipsis-h
                      .dropdown-menu.dropdown-menu-right
                        a.dropdown-item(href="#") Change date...
                        a.dropdown-item(href="#") Delete...
                  .card-text.collapse(id="meal"+recipe.id)
                    ul.list-group
                    each ingredient in recipe.ingredients
                      li.text-secondary.list-group-item.d-flex
                        .mr-auto= ingredient.name
                        .text-nowrap= ingredient.qty
                    if recipe.link
                      li.list-group-item.bg-light
                        a.text-secondary(href=recipe.link, target="_blank") See recipe...
                    //- li.list-group-item.bg-light
                    //-   a.text-secondary(href="#") More options...
        else if meal.active
          h4.text-primary= meal.name
            |
            |
            a.btn.btn-success.text-light(href="/calendar?eaten="+meal.id)
              i.fas.fa-check
          .row.align-items-start
            each recipe in meal.recipes
              .col-md-3
                .card.bg-primary.my-1
                  h5.card-header.d-flex
                    a.mr-auto.text-white(data-toggle="collapse" href="#meal"+recipe.id)= recipe.name
                    .drop-down
                      a.text-white(data-toggle="dropdown" href="#")
                        i.fas.fa-ellipsis-h
                      .dropdown-menu.dropdown-menu-right
                        a.dropdown-item(href="#") Change date...
                        a.dropdown-item(href="#") Delete...
                  .card-text.collapse.show(id="meal"+recipe.id)
                    ul.list-group
                    each ingredient in recipe.ingredients
                      li.list-group-item.d-flex
                        .mr-auto= ingredient.name
                        .text-nowrap= ingredient.qty
                    if recipe.link
                      li.list-group-item.bg-primary
                        a.text-white(href=recipe.link, target="_blank") See recipe...
                    //- li.list-group-item.bg-primary
                    //-   a.text-white(href="#") More options...
        else
          h4= meal.name
          .row.align-items-start
            each recipe in meal.recipes
              .col-md-3
                .card.bg-dark.my-1
                  h5.card-header.d-flex
                    a.mr-auto.text-white(data-toggle="collapse" href="#meal"+recipe.id)= recipe.name
                    .drop-down
                      a.text-white(data-toggle="dropdown" href="#")
                        i.fas.fa-ellipsis-h
                      .dropdown-menu.dropdown-menu-right
                        a.dropdown-item(href="#") Change date...
                        a.dropdown-item(href="#") Delete...
                  .card-text.collapse(id="meal"+recipe.id)
                    ul.list-group
                    each ingredient in recipe.ingredients
                      li.list-group-item.d-flex
                        .mr-auto= ingredient.name
                        .text-nowrap= ingredient.qty
                    if recipe.link
                      li.list-group-item.bg-dark
                        a.text-white(href=recipe.link, target="_blank") See recipe...
                    //- li.list-group-item.bg-dark
                    //-   a.text-white(href="#") More options...
